# COCOSiL 画面設計書

> [!CAUTION]
> **⚠️ このドキュメントは廃止されました**
> 
> 正式なUI設計書は [`4_ui_design_v3_integrated.md`](./4_ui_design_v3_integrated.md) を参照してください。
> このファイルはアーカイブとして保持されています。

**バージョン**: v1.0 (DEPRECATED)  
**作成日**: 2025-11-05  
**廃止日**: 2025-12-12  
**デザインシステム**: Tailwind CSS + shadcn/ui  
**レスポンシブ対応**: モバイルファースト

---

## 📋 目次

1. [画面一覧](#1-画面一覧)
2. [共通要素](#2-共通要素)
3. [画面詳細設計](#3-画面詳細設計)
4. [コンポーネント設計](#4-コンポーネント設計)
5. [デザイントークン](#5-デザイントークン)

---

## 1. 画面一覧

### 1.1 認証関連

| 画面ID | 画面名 | パス | 認証 |
|-------|--------|------|-----|
| AUTH-01 | ランディングページ | `/` | ❌ |
| AUTH-02 | ログイン | `/sign-in` | ❌ |
| AUTH-03 | 新規登録 | `/sign-up` | ❌ |
| AUTH-04 | 初期設定 | `/onboarding` | ✅ |

### 1.2 メインアプリ

| 画面ID | 画面名 | パス | 認証 |
|-------|--------|------|-----|
| MAIN-01 | ホームダッシュボード | `/home` | ✅ |
| MAIN-02 | 診断管理 | `/home/diagnosis` | ✅ |
| MAIN-03 | AIチャット | `/home/chat` | ✅ |
| MAIN-04 | 診断結果ハブ | `/home/results` | ✅ |
| MAIN-05 | 設定 | `/home/settings` | ✅ |
| MAIN-06 | 学習プロファイル（導線停止中） | — | ⚠️ 仕様策定中 |

### 1.3 診断詳細

| 画面ID | 画面名 | パス | 認証 |
|-------|--------|------|-----|
| DIAG-01 | 算命学系診断結果 | `/diagnosis/sanmeigaku` | ✅ |
| DIAG-02 | MBTI入力 | `/diagnosis/mbti` | ✅ |
| DIAG-03 | 体癖論入力 | `/diagnosis/taiheki` | ✅ |
| DIAG-04 | Big5入力 | `/diagnosis/big5` | ✅ |

---

## 2. 共通要素

### 2.1 ヘッダー（未ログイン/ログイン後）

- **ランディング/認証画面**: ロゴ + 「ログイン」「無料登録」ボタン。白背景に 8px ボーダー、スクロール時も固定（`sticky top-0`）。  
- **アプリ内（`/home` 系）**: ロゴ + 設定アイコン（`/home/settings`）。学習プロファイル画面は未定義のため、プロフィールアイコン導線は一旦非表示。余白 16px、背景は `bg-white/80` + `backdrop-blur-sm` で上部に固定。通知ベルは現バージョンでは未実装。

### 2.2 ボトムナビゲーション（ログイン後）

- すべての `/home/*` 画面下部に `fixed bottom-0` で配置。  
- 5つのアイテムを中央寄せグリッドで表示し、中央のみ円形FABでホームを強調。
  1. `📋 診断管理` → `/home/diagnosis`
  2. `💬 AIチャット` → `/home/chat`
  3. `🏠 ホーム` → `/home`（円形の強調ボタン）
  4. `📊 診断結果` → `/home/results`
  5. `👤 アカウント` → `/home/settings`
- モバイル表示を前提に最低タップ領域 60px を確保。Hover時は `text-cyan-500` に変化。

### 2.3 フッター（ランディング）

- 4カラム構成（サービス / ヘルプ / 法務 / フォロー）+ コピーライト。
- PCビューでは `grid-cols-4`、モバイルは `grid-cols-2`。  
- `hover:text-cyan-500` のリンク装飾と `border-t border-slate-200` のセクション区切り。

---

## 3. 画面詳細設計

### 3.1 AUTH-01: ランディングページ（/）

**目的**: サービスの魅力を伝え、新規登録へ誘導

```
┌────────────────────────────────────────────────────┐
│  🌀 COCOSiL                      [ログイン] [登録]  │
└────────────────────────────────────────────────────┘

                    🌀 COCOSiL
         あなたの本質を、AIと共に見つける

      ┌──────────────────────────────────────┐
      │  生年月日を入力するだけで、           │
      │  複数の診断があなたの性格を分析       │
      │                                      │
      │  [今すぐ無料で始める →]              │
      └──────────────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│                                                     │
│  📊 特徴1: 複数の診断を統合                          │
│  動物占い・星座占い・六星占術・MBTI・体癖論・Big5  │
│                                                     │
│  🤖 特徴2: AIが学習してパーソナライズ               │
│  チャットを重ねるごとに、あなたへの理解が深まる     │
│                                                     │
│  🔒 特徴3: プライバシー重視                          │
│  データは厳格に管理、いつでも削除可能               │
│                                                     │
└─────────────────────────────────────────────────────┘

      ┌──────────────────────────────────────┐
      │  [今すぐ無料で始める →]              │
      └──────────────────────────────────────┘

┌────────────────────────────────────────────────────┐
│  © 2025 COCOSiL | 利用規約 | プライバシーポリシー  │
└────────────────────────────────────────────────────┘
```

**CTA**: 「今すぐ無料で始める」ボタン → `/sign-up`

---

### 3.2 AUTH-03: 新規登録（/sign-up）

**目的**: 簡単な登録プロセスでユーザー獲得

```
┌────────────────────────────────────────────────────┐
│  🌀 COCOSiL                           [ログイン]    │
└────────────────────────────────────────────────────┘

              新規登録

┌──────────────────────────────────────────┐
│                                          │
│  [🔘 Googleで登録]                       │
│                                          │
│  ──────── または ────────                │
│                                          │
│  ニックネーム:                            │
│  ┌──────────────────────────────────┐   │
│  │ 山田太郎                         │   │
│  └──────────────────────────────────┘   │
│                                          │
│  メールアドレス:                          │
│  ┌──────────────────────────────────┐   │
│  │ example@mail.com                │   │
│  └──────────────────────────────────┘   │
│                                          │
│  パスワード:                              │
│  ┌──────────────────────────────────┐   │
│  │ ••••••••                        │   │
│  └──────────────────────────────────┘   │
│                                          │
│  生年月日:                                │
│  ┌─────┐ ┌────┐ ┌────┐              │
│  │1985 │ │ 06 │ │ 15 │              │
│  └─────┘ └────┘ └────┘              │
│                                          │
│  ✅ 利用規約とプライバシーポリシーに同意   │
│                                          │
│  [登録して診断を開始 →]                   │
│                                          │
│  すでにアカウントをお持ちですか？ [ログイン] │
│                                          │
└──────────────────────────────────────────┘
```

**フロー**:
1. 必須情報入力（ニックネーム、メール、パスワード、生年月日）
2. 「登録」ボタン押下
3. Clerk認証処理
4. `/onboarding` へリダイレクト

---

### 3.3 AUTH-04: 初期設定（/onboarding）

**目的**: ユーザーの基本情報と利用目的・プライバシー同意を取得し、ホームへ誘導する。

**主要UI要素**
- 3ステップのプログレスインジケーター（基本情報 → 診断の目的 → プライバシー）
- `Card` 全幅レイアウト（max-width 640px）でフォームを縦配置
- 常時表示の戻る/次へ（完了）ボタン。Backは step=1 で disabled

**Step1: 基本情報**
- フィールド: ニックネーム（必須）、生年月日（必須、date picker）
- ラベル下に補助テキスト（例: 「AIがあなたを呼ぶ時に使用します」）
- 入力が揃うまで「次へ」ボタンを disabled

**Step2: 診断目的**
- RadioGroup + カード型オプション（自己理解/人間関係/キャリア/自己成長/楽しみたい）
- 枠は `border-2`、hoverで `border-cyan-500`。選択状態は `focus-visible:ring`

**Step3: プライバシー設定**
- Checkbox: 「診断結果の通知を受け取る」「匿名データの研究利用に協力する」
- 情報ボックスでデータ保護方針を箇条書き表示

**アクション**
- 戻る: `Button variant="ghost"`
- 次へ/完了: シアン系グラデーションボタン。最終ステップで押すと `/home` へ遷移
- 送信時はフォームデータ（目的/同意含む）を API に送る想定（保存先 TBD）

---

### 3.4 MAIN-01: ホームダッシュボード（/home）

**目的**: 診断・AI・学習プロファイルへの導線をホームで統合し、最新ステータスをカードで提示。

**レイアウト**
- `bg-gradient-to-br from-blue-50 to-purple-50` の全画面背景
- `max-w-7xl mx-auto` の1カラム構成、セクション間を `space-y-8` で区切り
- 最下部に共通ボトムナビ

**コンテンツブロック**
1. **ウェルカム見出し**: 「おかえりなさい」「今日も自分を発見する旅を続けましょう」
2. **クイックアクションカード（2枚）**  
   - 「新しい診断」→ `/home/diagnosis`  
   - 「AIチャット」→ `/home/chat`  
   - （学習プロファイルカードは仕様確定まで非表示）  
   各カードは `Card` + グラデーションアイコンで構成。
3. **最近の診断結果**  
   - `Badge` で診断タイプ + `Clock` アイコンの実施日 + 結果タイトル  
   - 「すべて見る」ボタンで `/home/diagnosis` へ
4. **AIインサイトカード**  
   - フル幅グラデーション (`from-cyan-500 to-purple-500`)  
   - テキストと CTA「AIと話す」
5. **固定ボトムナビ**（セクション 2.2 参照）

**レスポンシブ要件**
- モバイル優先。カードは縦積み、MD以上で 3 カラム。
- `min-h-[60px]` でタップ領域確保。

---

### 3.5 MAIN-02: 診断管理（/home/diagnosis）

**目的**: 診断ステータスの可視化と再診導線の提供。

**ヘッダー**
- 左: ロゴリンク (`/home`)
- 中央: 画面タイトル「診断管理」
- 背景: `bg-white` + `border-b`

**セクションA: 新しい診断を追加**
- `Card` + `border-dashed border-cyan-300`
- 説明テキストと4つの `Button variant="outline"`:
  - MBTI / 体癖論 / Big5 / その他
  - アイコンカラーを診断種別ごとに分け、縦方向 2 行構成

**セクションB: 診断一覧**
- 各診断を `Card` で表示、左に 48px のグラデーションアイコン。
- 情報: 診断名、直近結果テキスト、Badge（「完了」「未実施」）、実施日テキスト。
- アクション:
  - 完了済み: 「再診断」（`variant="outline"`）のみ。データは削除不可のため、削除ボタンは表示しない。
  - 未実施: 「診断を開始」（プライマリーボタン）

**空状態**
- まだ診断がない場合のガイダンスは未実装。必要に応じて `Alert` や `Empty State` コンポーネントを追加する。

---

### 3.6 MAIN-03: AIチャット（/home/chat）

**目的**: 月10回制限付きでAIと対話し、診断結果を深掘りする。

**構成**
- `flex flex-col h-screen` でヘッダー/メッセージリスト/入力欄を縦配置
- 背景は `bg-gradient-to-br from-blue-50 to-purple-50`

**ヘッダー**
- 左: ロゴリンク（/home）
- 中央: 画面タイトル
- 右: `Badge` 表示「今月: n/10回」
- `bg-white border-b backdrop-blur-sm`

**メッセージリスト**
- `max-w-4xl mx-auto w-full space-y-6`
- アシスタント: 左寄せ、白カード、ロゴアバター（Sparklesアイコン）
- ユーザー: 右寄せ、シアン→ブルーのグラデーションバブル、AvatarFallbackにユーザー頭文字
- 各メッセージ下に `text-xs` のタイムスタンプ。300文字上限をフロント/バック双方でバリデート予定

**入力欄**
- `Input` + 送信ボタン（Sendアイコン）
- Enter送信、空文字は無効。送信後は1秒遅延でAIレスポンスを追加するモック挙動

**利用制限UI**
- 現状はバッジで通知するのみ。10/10到達時のアラート/ボタン無効化は未実装のため追加タスク

---

### 3.7 MAIN-04: 診断結果ハブ（/home/results）

**目的**: 全診断結果（算命学・MBTI・体癖論など）とAIチャット要約レポートをカテゴリ別に閲覧し、PDF/CSVでエクスポートする。

**セクション構成**
1. **ヘッダー**: `/home` へ戻るロゴリンク + タイトル「診断結果」
2. **診断サマリーカード**: 完了/未実施数を大型数値で表示（`bg-white/80` カード）
3. **カテゴリ別カードリスト**:
   - カテゴリ（例: 「動物占い・星座占い」「性格診断」）
   - 各診断はグラデーションアイコン + 結果テキスト
   - 詳細ボタン（`variant="ghost"`）で `/diagnosis/*` の詳細へ
   - 未実施の場合は `Badge variant="secondary"` を表示
4. **エクスポートセクション**:
   - ボタン: 「PDFでダウンロード」「CSVでダウンロード」
   - PDFはAIチャットが自動生成した診断レポートを含み、画面内プレビューも可能（別タブ/モーダルで閲覧できる仕様を検討）
   - CSVは全診断データをタブ区切りで出力

**要件**
- PDFエクスポートに AIチャットの要約レポートを同梱し、利用者が後から閲覧できるようにする
- JSONエクスポートは今回含めず、PDF+CSVを正式フォーマットとする
- 将来的にAIチャット結果の個別ダウンロードが必要な場合に備えて、レポート生成APIのインターフェースを `docs/3_api_specification.md` に追記予定

---

### 3.8 MAIN-06: 学習プロファイル（/dashboard/profile ※導線停止中）

**目的**: AIが学習した性格プロファイルの表示（現フェーズでは画面遷移を停止しており、将来の再開に備えて仕様のみ保持）

```
┌────────────────────────────────────────────────────┐
│  🌀 COCOSiL                      [通知🔔] [👤]     │
└────────────────────────────────────────────────────┘
┌─────────────┬──────────────────────────────────────┐
│ 🏠 ダッシュボード│                                      │
│ 📊 診断管理  │  学習プロファイル                       │
│ 💬 AIチャット │                                      │
│ 👤 プロファイル│  AIがチャットから学習したあなたの性格   │
│ ⚙️ 設定     │  最終更新: 2025-11-05 03:00           │
│             │                                      │
│             │ ┌────────────────────────────────┐  │
│             │ │ 🎯 コミュニケーション           │  │
│             │ ├────────────────────────────────┤  │
│             │ │ ・内向的で深い対話を好む        │  │
│             │ │ ・文章での表現が得意            │  │
│             │ │ ・少数の親しい友人を大切に      │  │
│             │ └────────────────────────────────┘  │
│             │                                      │
│             │ ┌────────────────────────────────┐  │
│             │ │ 💡 問題解決スタイル             │  │
│             │ ├────────────────────────────────┤  │
│             │ │ ・論理的・体系的に分析          │  │
│             │ │ ・データに基づく判断            │  │
│             │ │ ・じっくり考えて決断            │  │
│             │ └────────────────────────────────┘  │
│             │                                      │
│             │ ┌────────────────────────────────┐  │
│             │ │ ❤️ 対人関係                     │  │
│             │ ├────────────────────────────────┤  │
│             │ │ ・少数の親しい友人を大切に      │  │
│             │ │ ・共感力が高い                  │  │
│             │ │ ・信頼と誠実さを重視            │  │
│             │ └────────────────────────────────┘  │
│             │                                      │
│             │ 信頼度スコア: ●●●●○ (0.75)        │
│             │                                      │
│             │ [詳細データを見る（JSON形式）]        │
│             │                                      │
└─────────────┴──────────────────────────────────────┘
```

**プロファイル未生成時**:
```
┌──────────────────────────────────┐
│  ℹ️ プロファイルはまだ生成されて │
│     いません                     │
│                                  │
│  AIチャットを5回以上利用すると、 │
│  学習プロファイルが生成されます   │
│                                  │
│  [AIチャットを始める →]          │
└──────────────────────────────────┘
```

---

### 3.9 DIAG-02: MBTI入力（/diagnosis/mbti）

**目的**: MBTI診断結果の入力

```
┌────────────────────────────────────────────────────┐
│  🌀 COCOSiL                      [通知🔔] [👤]     │
└────────────────────────────────────────────────────┘
┌─────────────┬──────────────────────────────────────┐
│ 🏠 ダッシュボード│                                      │
│ 📊 診断管理  │  📝 MBTI診断結果の入力                 │
│ 💬 AIチャット │                                      │
│ 👤 プロファイル│                                      │
│ ⚙️ 設定     │  MBTIを知らない場合は、まず診断を受けて │
│             │  ください。                            │
│             │                                      │
│             │  [16Personalities で診断する →]       │
│             │                                      │
│             │ ┌────────────────────────────────┐  │
│             │ │ MBTIタイプを選択:               │  │
│             │ │                                │  │
│             │ │ ┌────────────────────────┐    │  │
│             │ │ │ タイプを選択してください ▼│    │  │
│             │ │ └────────────────────────┘    │  │
│             │ │                                │  │
│             │ │ 16タイプ:                      │  │
│             │ │ ・INTJ（建築家型）              │  │
│             │ │ ・INTP（論理学者型）            │  │
│             │ │ ・ENTJ（指揮官型）              │  │
│             │ │ ・ENTP（討論者型）              │  │
│             │ │ ・INFJ（提唱者型）              │  │
│             │ │ ・INFP（仲介者型）              │  │
│             │ │ ・ENFJ（主人公型）              │  │
│             │ │ ・ENFP（広報運動家型）          │  │
│             │ │ ・ISTJ（管理者型）              │  │
│             │ │ ・ISFJ（擁護者型）              │  │
│             │ │ ・ESTJ（幹部型）                │  │
│             │ │ ・ESFJ（領事官型）              │  │
│             │ │ ・ISTP（巨匠型）                │  │
│             │ │ ・ISFP（冒険家型）              │  │
│             │ │ ・ESTP（起業家型）              │  │
│             │ │ ・ESFP（エンターテイナー型）     │  │
│             │ │                                │  │
│             │ └────────────────────────────────┘  │
│             │                                      │
│             │  [保存]  [キャンセル]                  │
│             │                                      │
└─────────────┴──────────────────────────────────────┘
```

**保存後**:
```
✅ MBTIが保存されました！
   AIの学習対象に追加されました。

[ダッシュボードに戻る]  [他の診断を追加]
```

---

### 3.10 MAIN-05: 設定（/dashboard/settings）

**目的**: ユーザー情報編集、データ管理

```
┌────────────────────────────────────────────────────┐
│  🌀 COCOSiL                      [通知🔔] [👤]     │
└────────────────────────────────────────────────────┘
┌─────────────┬──────────────────────────────────────┐
│ 🏠 ダッシュボード│                                      │
│ 📊 診断管理  │  設定                                  │
│ 💬 AIチャット │                                      │
│ 👤 プロファイル│ ┌────────────────────────────────┐  │
│ ⚙️ 設定     │ │ 👤 ユーザー情報                 │  │
│             │ ├────────────────────────────────┤  │
│             │ │ ニックネーム:                   │  │
│             │ │ ┌──────────────────────────┐  │  │
│             │ │ │ 山田太郎                 │  │  │
│             │ │ └──────────────────────────┘  │  │
│             │ │                                │  │
│             │ │ 生年月日:                       │  │
│             │ │ ┌─────┐ ┌────┐ ┌────┐      │  │
│             │ │ │1985 │ │ 06 │ │ 15 │      │  │
│             │ │ └─────┘ └────┘ └────┘      │  │
│             │ │                                │  │
│             │ │ [変更を保存]                    │  │
│             │ └────────────────────────────────┘  │
│             │                                      │
│             │ ┌────────────────────────────────┐  │
│             │ │ 📊 データ管理                   │  │
│             │ ├────────────────────────────────┤  │
│             │ │ [データをエクスポート]          │  │
│             │ │ JSON形式またはCSV形式で         │  │
│             │ │ すべてのデータをダウンロード     │  │
│             │ └────────────────────────────────┘  │
│             │                                      │
│             │ ┌────────────────────────────────┐  │
│             │ │ 🗑️ アカウント削除               │  │
│             │ ├────────────────────────────────┤  │
│             │ │ [アカウントを削除]              │  │
│             │ │ ⚠️ この操作は取り消せません     │  │
│             │ └────────────────────────────────┘  │
│             │                                      │
└─────────────┴──────────────────────────────────────┘
```

**アカウント削除確認ダイアログ**:
```
┌────────────────────────────────────┐
│  ⚠️ アカウントを削除しますか？     │
│                                    │
│  この操作は取り消せません。         │
│  すべてのデータが完全に削除されます。│
│                                    │
│  [キャンセル]  [削除する]          │
└────────────────────────────────────┘
```

---

## 4. コンポーネント設計

### 4.1 診断結果カード

```tsx
<DiagnosisCard
  type="sanmeigaku"
  title="算命学系"
  isActive={true}
  lastUpdated="2025-11-01"
  onToggle={() => {}}
  onViewDetails={() => {}}
>
  <DiagnosisDetail label="動物占い" value="落ち着きのあるペガサス" />
  <DiagnosisDetail label="星座占い" value="蟹座" />
  <DiagnosisDetail label="六星占術" value="金星人+" />
</DiagnosisCard>
```

### 4.2 チャットメッセージ

```tsx
<ChatMessage
  role="assistant"
  content="こんにちは！診断結果を基に、あなたの性格について話しましょう。"
  timestamp="2025-11-05T20:00:00Z"
/>
```

### 4.3 プロファイルセクション

```tsx
<ProfileSection
  icon="🎯"
  title="コミュニケーション"
  items={[
    "内向的で深い対話を好む",
    "文章での表現が得意",
    "少数の親しい友人を大切に"
  ]}
/>
```

---

## 5. デザイントークン

### 5.1 カラーパレット

```css
/* プライマリーカラー */
--primary-50: #f0f9ff;
--primary-500: #3b82f6;
--primary-700: #1d4ed8;

/* グレースケール */
--gray-50: #f9fafb;
--gray-100: #f3f4f6;
--gray-500: #6b7280;
--gray-900: #111827;

/* セマンティックカラー */
--success: #10b981;
--warning: #f59e0b;
--error: #ef4444;
--info: #3b82f6;
```

### 5.2 タイポグラフィ

```css
/* フォントサイズ */
--text-xs: 0.75rem;     /* 12px */
--text-sm: 0.875rem;    /* 14px */
--text-base: 1rem;      /* 16px */
--text-lg: 1.125rem;    /* 18px */
--text-xl: 1.25rem;     /* 20px */
--text-2xl: 1.5rem;     /* 24px */
--text-3xl: 1.875rem;   /* 30px */

/* フォントウェイト */
--font-normal: 400;
--font-medium: 500;
--font-semibold: 600;
--font-bold: 700;
```

### 5.3 スペーシング

```css
/* マージン・パディング */
--space-1: 0.25rem;   /* 4px */
--space-2: 0.5rem;    /* 8px */
--space-3: 0.75rem;   /* 12px */
--space-4: 1rem;      /* 16px */
--space-6: 1.5rem;    /* 24px */
--space-8: 2rem;      /* 32px */
--space-12: 3rem;     /* 48px */
--space-16: 4rem;     /* 64px */
```

### 5.4 ブレークポイント

```css
/* レスポンシブブレークポイント */
--breakpoint-sm: 640px;   /* スマートフォン */
--breakpoint-md: 768px;   /* タブレット */
--breakpoint-lg: 1024px;  /* デスクトップ */
--breakpoint-xl: 1280px;  /* ワイドデスクトップ */
```

---

## 付録A: アクセシビリティチェックリスト

- [ ] すべてのインタラクティブ要素にフォーカス可能
- [ ] キーボード操作のみで全機能利用可能
- [ ] 適切なARIAラベル設定
- [ ] コントラスト比WCAG AA準拠（4.5:1以上）
- [ ] スクリーンリーダー対応

---

## 付録B: モバイルファースト設計原則

1. **タッチターゲット**: 最小44x44px
2. **フォントサイズ**: 最小16px（ズーム無効化を避ける）
3. **レイアウト**: 縦スクロール優先、横スクロール最小化
4. **ローディング**: スケルトンUIで体感速度向上
5. **オフライン対応**: 将来的にService Worker実装

---

**文書バージョン**: v1.0  
**最終更新**: 2025-11-05  
**次回レビュー**: UIデザイン開始時
